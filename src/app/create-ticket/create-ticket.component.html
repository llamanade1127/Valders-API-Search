<mat-card>
    <mat-card-title>
        Create Ticket
    </mat-card-title>
    <mat-card-content>

        <mat-stepper [linear]="true">
            <mat-step [stepControl]="studentInfoForm">
                <ng-template matStepLabel>Student Info</ng-template>
                <form [formGroup]="studentInfoForm" class="studentForm" (ngSubmit)="checkStudent()">
                    <mat-form-field appearance="fill" class="div1">
                        <mat-label>Student ID, Email or Name</mat-label>
                        <input
                          matInput
                          [(ngModel)]="currentStudentID"
                          formControlName="studentID"
                          type="text"
                          placeholder="email"
                          autocomplete="off"/>
                          <mat-hint align="end" *ngIf="foundStudent">{{Student.Name}}</mat-hint>
                          <mat-hint align="end" *ngIf="!foundStudent">Could not find student</mat-hint>
                    </mat-form-field>
        
                    <mat-form-field appearance="fill" class="div2">
                        <mat-label>Graduation Year</mat-label>
                        <input
                          matInput
                          formControlName="gradYear"
                          type="text"
                          placeholder="2022"
                          autocomplete="off"/>
                    </mat-form-field>
        
                    <mat-form-field appearance="fill" class="div3">
                        <mat-label>Issue</mat-label>
                        <mat-select formControlName="ticketIssue">
                            <mat-option value="Day Loaner">Day loaner</mat-option>
                            <mat-option value="Damaged Device" >Damaged Device</mat-option>
                        </mat-select>
                    </mat-form-field>

                </form>
                <div>
                    <button mat-button matStepperNext color="accent">Next</button>
                </div>
            </mat-step>
            <mat-step [stepControl]="damagedDeviceForm" *ngIf="ticketIssue?.value !== 'Day Loaner' && ticketIssue?.value">
                <ng-template matStepLabel>Device Damaged</ng-template>
                <form [formGroup]="damagedDeviceForm" class="deviceInfoForm">
                    <mat-form-field appearance="fill" class="div1">
                        <mat-label>Damaged Device ID</mat-label>
                        <input
                          matInput
                          [(ngModel)]="chromebookKey"
                          formControlName="deviceID"
                          type="text"
                          placeholder="VASD0001"
                          autocomplete="off"/>
                          <mat-hint align="end" *ngIf="foundChromebook">{{Chromebook.annotatedAssetId}}</mat-hint>
                          <mat-hint align="end" *ngIf="!foundChromebook">Could not find Chromebook</mat-hint>
                    </mat-form-field>
                    
                    <mat-form-field appearance="fill" class="div2">
                        <mat-label>Device Issue</mat-label>
                        <input
                          matInput
                          formControlName="deviceIssue"
                          type="text"
                          placeholder="Boken Screen"
                          autocomplete="off"/>
                    </mat-form-field>
        
                    
                    <mat-form-field appearance="fill" class="div3">
                        <mat-label>Cause</mat-label>
                        <input
                          matInput
                          formControlName="cause"
                          type="text"
                          placeholder="Not dropped it"
                          autocomplete="off"/>
                    </mat-form-field>
        
                    <mat-form-field appearance="fill" class="div4">
                        <mat-label>Could the device have been avoided being broken?</mat-label>
        
                        <mat-select formControlName="beenAvoided">
                            <mat-option value=true>Yes</mat-option>
                            <mat-option value=false >No</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="div5">
                        <mat-label>What could you have done differently</mat-label>
                        <input
                          matInput
                          formControlName="doneDifferently"
                          type="text"
                          placeholder="Not dropped it"
                          autocomplete="off"/>
                    </mat-form-field>
        
                    <mat-form-field appearance="fill" class="div6">
                        <mat-label>Is loaner</mat-label>
                        <mat-select formControlName="isLoaner">
                            <mat-option value="true">Yes</mat-option>
                            <mat-option value="false" >No</mat-option>
                        </mat-select>
                    </mat-form-field>
        
        
                    <mat-form-field appearance="fill" class="div7">
                        <mat-label>Was given loaner</mat-label>
        
                        <mat-select formControlName="givenLoaner">
                            <mat-option value="true">Yes</mat-option>
                            <mat-option value="false" >No</mat-option>
                        </mat-select>
                    </mat-form-field>


                </form>
                <div>
                    <button mat-button matStepperPrevious color="accent">Previous</button>
                    <button mat-button matStepperNext color="accent">Next</button>
                </div>
            </mat-step>
            <mat-step [stepControl]="loanerForm" *ngIf="ticketIssue?.value == 'Day Loaner' && ticketIssue?.value || givenLoaner?.value == 'true'">
                <ng-template matStepLabel>Loaner Info</ng-template>
                <form [formGroup]="loanerForm" class="loanerForm">
                    <mat-form-field appearance="fill" class="div1">
                        <mat-label>Loaner ID</mat-label>
                        <input
                          matInput
                          formControlName="loanerID"
                          type="text"
                          placeholder="VASDL001"
                          autocomplete="off"/>
                          <mat-hint align="end" *ngIf="foundLoaner">{{loaner.serialNumber}}:{{loaner.model}}</mat-hint>
                          <mat-hint align="end" *ngIf="!foundLoaner">Could not find Chromebook</mat-hint>

                    </mat-form-field>
    
                    <mat-form-field appearance="fill" class="div2">
                        <mat-label>Loaner Number</mat-label>
                        <input
                          matInput
                          formControlName="loanerNumber"
                          [(ngModel)]="loanerNumber"
                          type="text"
                          placeholder="04"
                          autocomplete="off"/>
                    </mat-form-field>
    
                    <mat-form-field appearance="fill" class="div3">
                        <mat-label>Given Charger</mat-label>
                        <mat-select formControlName="givenCharger">
                            <mat-option value=true>Yes</mat-option>
                            <mat-option value=false >No</mat-option>
            
                        </mat-select>
                    </mat-form-field>
                </form>
                <div>
                    <button mat-button matStepperPrevious color="accent">Previous</button>
                    <button mat-button matStepperNext color="accent">Next</button>
                </div>
            </mat-step>
            <mat-step [stepControl]="finalForm">
                <ng-template matStepLabel>Notes</ng-template>
                <form [formGroup]="finalForm" class="notesForm">
                    <mat-form-field appearance="fill" class="div1">
                        <mat-label>Notes</mat-label>
                        <textarea
                          matInput
                          formControlName="notes"
                          type="text"
                          placeholder="Bla bla bla"
                          autocomplete="off"></textarea>
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="div2">
                        <mat-label>Created By</mat-label>
                        <input
                          matInput
                          formControlName="createdBy"
                          type="text"
                          placeholder="Bla bla bla"
                          autocomplete="off"/>
                    </mat-form-field>
                </form>
                <div>
                    <button mat-button matStepperPrevious color="accent">Previous</button>
                    <button mat-button (click)="submitTicket" color="accent">Submit</button>
                </div>
            </mat-step>
        </mat-stepper>

        <!-- <form [formGroup]="form" class="parent">

            <mat-form-field appearance="fill" class="div1">
                <mat-label>Student ID, Email or Name</mat-label>
                <input
                  matInput
                  formControlName="studentID"
                  type="text"
                  placeholder="email"
                  autocomplete="off"/>
            </mat-form-field>

            <mat-form-field appearance="fill" class="div2">
                <mat-label>Graduation Year</mat-label>
                <input
                  matInput
                  formControlName="gradYear"
                  type="text"
                  placeholder="2022"
                  autocomplete="off"/>
            </mat-form-field>

            
            <mat-form-field appearance="fill" class="div3">
                <mat-label>Issue</mat-label>
                <mat-select formControlName="ticketIssue">
                    <mat-option value="Day Loaner">Day loaner</mat-option>
                    <mat-option value="Damaged Device" >Damaged Device</mat-option>
                </mat-select>
            </mat-form-field>


            <mat-form-field appearance="fill" class="div4">
                <mat-label>Damaged Device ID</mat-label>
                <input
                  matInput
                  formControlName="deviceID"
                  type="text"
                  placeholder="VASD0001"
                  autocomplete="off"/>
            </mat-form-field>

            <mat-form-field appearance="fill" class="div5">
                <mat-label>Is loaner</mat-label>
                <mat-select formControlName="isLoaner">
                    <mat-option value=true>Yes</mat-option>
                    <mat-option value=false >No</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field appearance="fill" class="div6">
                <mat-label>Device Issue</mat-label>
                <input
                  matInput
                  formControlName="deviceIssue"
                  type="text"
                  placeholder="Boken Screen"
                  autocomplete="off"/>
            </mat-form-field>

            
            <mat-form-field appearance="fill" class="div7">
                <mat-label>Cause</mat-label>
                <input
                  matInput
                  formControlName="cause"
                  type="text"
                  placeholder="Not dropped it"
                  autocomplete="off"/>
            </mat-form-field>

            <mat-form-field appearance="fill" class="div8">
                <mat-label>What could you have done differently</mat-label>
                <input
                  matInput
                  formControlName="doneDifferently"
                  type="text"
                  placeholder="Not dropped it"
                  autocomplete="off"/>
            </mat-form-field>

            <mat-form-field appearance="fill" class="div9">
                <mat-label>Notes</mat-label>
                <textarea
                  matInput
                  formControlName="notes"
                  type="text"
                  placeholder="Bla bla bla"
                  autocomplete="off"></textarea>
            </mat-form-field>

            <mat-form-field appearance="fill" class="div10">
                <mat-label>Was given loaner</mat-label>

                <mat-select formControlName="givenLoaner" [ngModel]="ticketIssue">
                    <mat-option value=true>Yes</mat-option>
                    <mat-option value=false >No</mat-option>
                </mat-select>
            </mat-form-field>

            <div class="div11" *ngIf="!givenLoaner"></div>
            <mat-form-field appearance="fill" class="div11" *ngIf="givenLoaner">
                <mat-label>Loaner ID</mat-label>
                <input
                  matInput
                  formControlName="loanerID"
                  type="text"
                  placeholder="Bla bla bla"
                  autocomplete="off"/>
            </mat-form-field>

            <div class="div12" *ngIf="!givenLoaner"></div>
            <mat-form-field appearance="fill" class="div12" *ngIf="givenLoaner">
                <mat-label>Given Charger</mat-label>
                <mat-select formControlName="givenCharger">
                    <mat-option value=true>Yes</mat-option>
                    <mat-option value=false >No</mat-option>
    
                </mat-select>
            </mat-form-field>
            <mat-form-field appearance="fill" class="div13">
                <mat-label>Created By</mat-label>
                <input
                  matInput
                  formControlName="createdBy"
                  type="text"
                  placeholder="Bla bla bla"
                  autocomplete="off"/>
            </mat-form-field>

            <div class="div14">

            </div>
            <div class="div15"></div>
            <button 
            color="primary"
            mat-raised-button
            type="submit"
            [disabled]="loading"
          >
  
            Create Ticket
          </button>
          <button mat-raised-button color="warn" routerLink="/">Return</button>
        </form> -->

    </mat-card-content>
</mat-card>
